## 状態の保持

SwiftUIで状態を管理する際に頻出するのが、@Stateと@Bindingです。この2つを理解すると、ビュー間でのデータのやり取りや状態の管理がスムーズに行えるようになります。

@State: ビュー内部で状態を管理するために使用します。この値が変化すると、自動的にビューが再描画されます。
@Binding: 親ビューから子ビューに状態を渡すために使用します。双方向でデータを共有できるのが特徴です。
では、これらを使って二進数変換アプリのロジックを実装してみましょう。

## 状態を管理する準備
先ほど実装したContentViewにあった以下記載に注目してください。
```swift
@State private var inputNumber: String = "" // ユーザーが入力する値
@State private var binaryResult: String = "" // 二進数変換の結果
```
@Stateを用いることで、キャッシュの管理ができます。
SwiftUIにおいては、Viewの更新とキャッシュプロパティの更新は暗黙的に連動し、実施されます。
具体的には@Stateを付与することで、値が変更されたときにビューが更新されるようになります。

ユーザーが入力する値はTextFieldを使って受け取ります。このとき、@Stateの値をバインドすることで、入力値が状態として管理されます。
```swift
@State private var inputNumber: String = "" // ユーザーが入力する値
@State private var binaryResult: String = "" // 二進数変換の結果
```

先ほど、CustomTextFieldを別Viewに切り出しましたが、当該箇所は以下のように書くこともできます。
```swift
// ContentView
struct ContentView: View {
    @State private var inputNumber: String = ""
    @State private var binaryResult: String = ""

    var body: some View {
        ZStack() {

            VStack(spacing: 12) {
                Spacer()

                TextField("好みの数字を入れてね💕", text: $inputNumber)
                .textFieldStyle(RoundedBorderTextFieldStyle())
                .frame(width: ScreenSize.width * 0.75)

                ConvertButton(action: calculateBinary)

                if !binaryResult.isEmpty {
                    Spacer()
                    ResultText(result: binaryResult)
                }

                Spacer()
            }
        }
        .frame(maxWidth: .infinity)
        .background(Color.black)
        .ignoresSafeArea()
    }
```

## 子ビューとの連携: @Binding
子ビューで入力フィールドをカスタム化する場合、@Bindingを使用します。これにより、親ビューの@Stateとデータが同期されます。

```swift
// ContentView
struct ContentView: View {
    @State private var inputNumber: String = ""
    @State private var binaryResult: String = ""

    var body: some View {
        ZStack() {

            VStack(spacing: 12) {
                Spacer()

                CustomTextField(text: $inputNumber)

                ConvertButton(action: calculateBinary)

                if !binaryResult.isEmpty {
                    Spacer()
                    ResultText(result: binaryResult)
                }

                Spacer()
            }
        }
        .frame(maxWidth: .infinity)
        .background(Color.black)
        .ignoresSafeArea()
    }

    // カスタムTextField
struct CustomTextField: View {
    @Binding var text: String

    var body: some View {
        TextField("好みの数字を入れてね💕", text: $text)
            .textFieldStyle(RoundedBorderTextFieldStyle())
            .frame(width: ScreenSize.width * 0.75)
    }
}
```

上記のコードにおいて、`@Binding var text: String`と`@State private var inputNumber: String = ""`の値は連動します。

## まとめ
このように、@Stateで状態を管理し、@Bindingで親子間のデータを共有することで、スムーズにUIとロジックを連携できます。状態の変化に応じてビューが自動的に更新される点が、SwiftUIの強力な特徴です。